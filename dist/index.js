/*! For license information please see index.js.LICENSE.txt */
(()=>{var t={630:(t,e,n)=>{var r;!function(t){!function(e){var r="object"==typeof globalThis?globalThis:"object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:function(){try{return Function("return this;")()}catch(t){}}()||function(){try{return(0,eval)("(function() { return this; })()")}catch(t){}}(),o=i(t);function i(t,e){return function(n,r){Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0!==r.Reflect&&(o=i(r.Reflect,o)),function(t,e){var n=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,o=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,a={__proto__:[]}instanceof Array,c=!s&&!a,u={create:s?function(){return H(Object.create(null))}:a?function(){return H({__proto__:null})}:function(){return H({})},has:c?function(t,e){return n.call(t,e)}:function(t,e){return e in t},get:c?function(t,e){return n.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},p=Object.getPrototypeOf(Function),l="function"==typeof Map&&"function"==typeof Map.prototype.entries?Map:function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[i]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,o=n+1;o<r;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,x(e,this._cacheKey)&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[i]=function(){return this.entries()},e.prototype._find=function(t,e){if(!x(this._cacheKey,t)){this._cacheIndex=-1;for(var n=0;n<this._keys.length;n++)if(x(this._keys[n],t)){this._cacheIndex=n;break}}return this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function o(t,e){return e}function s(t,e){return[t,e]}}(),f="function"==typeof Set&&"function"==typeof Set.prototype.entries?Set:function(){function t(){this._map=new l}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.keys()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[i]=function(){return this.keys()},t}(),d="function"==typeof WeakMap?WeakMap:function(){var t=16,e=u.create(),r=o();return function(){function t(){this._key=o()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&u.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?u.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=o()},t}();function o(){var t;do{t="@@WeakMap@@"+a()}while(u.has(e,t));return e[t]=!0,t}function i(t,e){if(!n.call(t,r)){if(!e)return;Object.defineProperty(t,r,{value:u.create()})}return t[r]}function s(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(){var e=function(t){if("function"==typeof Uint8Array){var e=new Uint8Array(t);return"undefined"!=typeof crypto?crypto.getRandomValues(e):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(e):s(e,t),e}return s(new Array(t),t)}(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<t;++r){var o=e[r];4!==r&&6!==r&&8!==r||(n+="-"),o<16&&(n+="0"),n+=o.toString(16).toLowerCase()}return n}}(),h=r?Symbol.for("@reflect-metadata:registry"):void 0,y=function(){var t;return!O(h)&&C(e.Reflect)&&Object.isExtensible(e.Reflect)&&(t=e.Reflect[h]),O(t)&&(t=function(){var t,n,r,o;O(h)||void 0===e.Reflect||h in e.Reflect||"function"!=typeof e.Reflect.defineMetadata||(t=function(t){var e=t.defineMetadata,n=t.hasOwnMetadata,r=t.getOwnMetadata,o=t.getOwnMetadataKeys,i=t.deleteMetadata,s=new d;return{isProviderFor:function(t,e){var n=s.get(t);return!(O(n)||!n.has(e))||!!o(t,e).length&&(O(n)&&(n=new f,s.set(t,n)),n.add(e),!0)},OrdinaryDefineOwnMetadata:e,OrdinaryHasOwnMetadata:n,OrdinaryGetOwnMetadata:r,OrdinaryOwnMetadataKeys:o,OrdinaryDeleteMetadata:i}}(e.Reflect));var i=new d,s={registerProvider:a,getProvider:u,setProvider:y};return s;function a(e){if(!Object.isExtensible(s))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case t===e:break;case O(n):n=e;break;case n===e:break;case O(r):r=e;break;case r===e:break;default:void 0===o&&(o=new f),o.add(e)}}function c(e,i){if(!O(n)){if(n.isProviderFor(e,i))return n;if(!O(r)){if(r.isProviderFor(e,i))return n;if(!O(o))for(var s=N(o);;){var a=D(s);if(!a)return;var c=U(a);if(c.isProviderFor(e,i))return G(s),c}}}if(!O(t)&&t.isProviderFor(e,i))return t}function u(t,e){var n,r=i.get(t);return O(r)||(n=r.get(e)),O(n)?(O(n=c(t,e))||(O(r)&&(r=new l,i.set(t,r)),r.set(e,n)),n):n}function p(t){if(O(t))throw new TypeError;return n===t||r===t||!O(o)&&o.has(t)}function y(t,e,n){if(!p(n))throw new Error("Metadata provider not registered.");var r=u(t,e);if(r!==n){if(!O(r))return!1;var o=i.get(t);O(o)&&(o=new l,i.set(t,o)),o.set(e,n)}return!0}}()),!O(h)&&C(e.Reflect)&&Object.isExtensible(e.Reflect)&&Object.defineProperty(e.Reflect,h,{enumerable:!1,configurable:!1,writable:!1,value:t}),t}(),v=function(t){var e=new d,n={isProviderFor:function(t,n){var r=e.get(t);return!O(r)&&r.has(n)},OrdinaryDefineOwnMetadata:function(t,e,n,o){r(n,o,!0).set(t,e)},OrdinaryHasOwnMetadata:function(t,e,n){var o=r(e,n,!1);return!O(o)&&A(o.has(t))},OrdinaryGetOwnMetadata:function(t,e,n){var o=r(e,n,!1);if(!O(o))return o.get(t)},OrdinaryOwnMetadataKeys:function(t,e){var n=[],o=r(t,e,!1);if(O(o))return n;for(var i=N(o.keys()),s=0;;){var a=D(i);if(!a)return n.length=s,n;var c=U(a);try{n[s]=c}catch(t){try{G(i)}finally{throw t}}s++}},OrdinaryDeleteMetadata:function(t,n,o){var i=r(n,o,!1);if(O(i))return!1;if(!i.delete(t))return!1;if(0===i.size){var s=e.get(n);O(s)||(s.delete(o),0===s.size&&e.delete(s))}return!0}};return y.registerProvider(n),n;function r(r,o,i){var s=e.get(r),a=!1;if(O(s)){if(!i)return;s=new l,e.set(r,s),a=!0}var c=s.get(o);if(O(c)){if(!i)return;if(c=new l,s.set(o,c),!t.setProvider(r,o,n))throw s.delete(o),a&&e.delete(r),new Error("Wrong provider for target.")}return c}}(y);function g(t,e,n){if(w(t,e,n))return!0;var r=q(e);return!k(r)&&g(t,r,n)}function w(t,e,n){var r=F(e,n,!1);return!O(r)&&A(r.OrdinaryHasOwnMetadata(t,e,n))}function b(t,e,n){if(w(t,e,n))return _(t,e,n);var r=q(e);return k(r)?void 0:b(t,r,n)}function _(t,e,n){var r=F(e,n,!1);if(!O(r))return r.OrdinaryGetOwnMetadata(t,e,n)}function S(t,e,n,r){F(n,r,!0).OrdinaryDefineOwnMetadata(t,e,n,r)}function m(t,e){var n=E(t,e),r=q(t);if(null===r)return n;var o=m(r,e);if(o.length<=0)return n;if(n.length<=0)return o;for(var i=new f,s=[],a=0,c=n;a<c.length;a++){var u=c[a];i.has(u)||(i.add(u),s.push(u))}for(var p=0,l=o;p<l.length;p++)u=l[p],i.has(u)||(i.add(u),s.push(u));return s}function E(t,e){var n=F(t,e,!1);return n?n.OrdinaryOwnMetadataKeys(t,e):[]}function R(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function O(t){return void 0===t}function k(t){return null===t}function C(t){return"object"==typeof t?null!==t:"function"==typeof t}function M(t,e){switch(R(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",r=I(t,o);if(void 0!==r){var i=r.call(t,n);if(C(i))throw new TypeError;return i}return function(t,e){if("string"===e){var n=t.toString;if(L(n)&&!C(o=n.call(t)))return o;if(L(r=t.valueOf)&&!C(o=r.call(t)))return o}else{var r;if(L(r=t.valueOf)&&!C(o=r.call(t)))return o;var o,i=t.toString;if(L(i)&&!C(o=i.call(t)))return o}throw new TypeError}(t,"default"===n?"number":n)}function A(t){return!!t}function T(t){var e=M(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function P(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function L(t){return"function"==typeof t}function j(t){return"function"==typeof t}function x(t,e){return t===e||t!=t&&e!=e}function I(t,e){var n=t[e];if(null!=n){if(!L(n))throw new TypeError;return n}}function N(t){var e=I(t,i);if(!L(e))throw new TypeError;var n=e.call(t);if(!C(n))throw new TypeError;return n}function U(t){return t.value}function D(t){var e=t.next();return!e.done&&e}function G(t){var e=t.return;e&&e.call(t)}function q(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===p)return e;if(e!==p)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var o=r.constructor;return"function"!=typeof o||o===t?e:o}function F(t,e,n){var r=y.getProvider(t,e);if(!O(r))return r;if(n){if(y.setProvider(t,e,v))return v;throw new Error("Illegal state.")}}function H(t){return t.__=void 0,delete t.__,t}t("decorate",(function(t,e,n,r){if(O(n)){if(!P(t))throw new TypeError;if(!j(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!O(r)&&!k(r)){if(!j(r))throw new TypeError;e=r}}return e}(t,e)}if(!P(t))throw new TypeError;if(!C(e))throw new TypeError;if(!C(r)&&!O(r)&&!k(r))throw new TypeError;return k(r)&&(r=void 0),function(t,e,n,r){for(var o=t.length-1;o>=0;--o){var i=(0,t[o])(e,n,r);if(!O(i)&&!k(i)){if(!C(i))throw new TypeError;r=i}}return r}(t,e,n=T(n),r)})),t("metadata",(function(t,e){return function(n,r){if(!C(n))throw new TypeError;if(!O(r)&&!function(t){switch(R(t)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;S(t,e,n,r)}})),t("defineMetadata",(function(t,e,n,r){if(!C(n))throw new TypeError;return O(r)||(r=T(r)),S(t,e,n,r)})),t("hasMetadata",(function(t,e,n){if(!C(e))throw new TypeError;return O(n)||(n=T(n)),g(t,e,n)})),t("hasOwnMetadata",(function(t,e,n){if(!C(e))throw new TypeError;return O(n)||(n=T(n)),w(t,e,n)})),t("getMetadata",(function(t,e,n){if(!C(e))throw new TypeError;return O(n)||(n=T(n)),b(t,e,n)})),t("getOwnMetadata",(function(t,e,n){if(!C(e))throw new TypeError;return O(n)||(n=T(n)),_(t,e,n)})),t("getMetadataKeys",(function(t,e){if(!C(t))throw new TypeError;return O(e)||(e=T(e)),m(t,e)})),t("getOwnMetadataKeys",(function(t,e){if(!C(t))throw new TypeError;return O(e)||(e=T(e)),E(t,e)})),t("deleteMetadata",(function(t,e,n){if(!C(e))throw new TypeError;if(O(n)||(n=T(n)),!C(e))throw new TypeError;O(n)||(n=T(n));var r=F(e,n,!1);return!O(r)&&r.OrdinaryDeleteMetadata(t,e,n)}))}(o,r),void 0===r.Reflect&&(r.Reflect=t)}()}(r||(r={}))}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";var t;n(630),function(t){t[t.Transient=0]="Transient",t[t.Singleton=1]="Singleton",t[t.ResolutionScoped=2]="ResolutionScoped",t[t.ContainerScoped=3]="ContainerScoped"}(t||(t={}));const e=t;var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)};function o(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function a(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}function c(t){return!!t.useClass}function u(t){return!!t.useFactory}var p=function(){function t(t){this.wrap=t,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return t.prototype.createProxy=function(t){var e,n=this,r=!1;return new Proxy({},this.createHandler((function(){return r||(e=t(n.wrap()),r=!0),e})))},t.prototype.createHandler=function(t){var e={};return this.reflectMethods.forEach((function(n){e[n]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e[0]=t(),Reflect[n].apply(void 0,a(e))}})),e},t}();function l(t){return"string"==typeof t||"symbol"==typeof t}function f(t){return"object"==typeof t&&"token"in t&&"transform"in t}function d(t){return!!t.useToken}function h(t){return null!=t.useValue}const y=function(){function t(){this._registryMap=new Map}return t.prototype.entries=function(){return this._registryMap.entries()},t.prototype.getAll=function(t){return this.ensure(t),this._registryMap.get(t)},t.prototype.get=function(t){this.ensure(t);var e=this._registryMap.get(t);return e[e.length-1]||null},t.prototype.set=function(t,e){this.ensure(t),this._registryMap.get(t).push(e)},t.prototype.setAll=function(t,e){this._registryMap.set(t,e)},t.prototype.has=function(t){return this.ensure(t),this._registryMap.get(t).length>0},t.prototype.clear=function(){this._registryMap.clear()},t.prototype.ensure=function(t){this._registryMap.has(t)||this._registryMap.set(t,[])},t}(),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(y),g=function(){this.scopedResolutions=new Map};var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(y),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(y);const _=function(){this.preResolution=new w,this.postResolution=new b};var S=new Map,m=function(){function t(t){this.parent=t,this._registry=new v,this.interceptors=new _,this.disposed=!1,this.disposables=new Set}return t.prototype.register=function(t,n,r){var o;if(void 0===r&&(r={lifecycle:e.Transient}),this.ensureNotDisposed(),o=function(t){return c(t)||h(t)||d(t)||u(t)}(n)?n:{useClass:n},d(o))for(var i=[t],s=o;null!=s;){var p=s.useToken;if(i.includes(p))throw new Error("Token registration cycle detected! "+a(i,[p]).join(" -> "));i.push(p);var l=this._registry.get(p);s=l&&d(l.provider)?l.provider:null}if((r.lifecycle===e.Singleton||r.lifecycle==e.ContainerScoped||r.lifecycle==e.ResolutionScoped)&&(h(o)||u(o)))throw new Error('Cannot use lifecycle "'+e[r.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(t,{provider:o,options:r}),this},t.prototype.registerType=function(t,e){return this.ensureNotDisposed(),l(e)?this.register(t,{useToken:e}):this.register(t,{useClass:e})},t.prototype.registerInstance=function(t,e){return this.ensureNotDisposed(),this.register(t,{useValue:e})},t.prototype.registerSingleton=function(t,n){if(this.ensureNotDisposed(),l(t)){if(l(n))return this.register(t,{useToken:n},{lifecycle:e.Singleton});if(n)return this.register(t,{useClass:n},{lifecycle:e.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var r=t;return n&&!l(n)&&(r=n),this.register(t,{useClass:r},{lifecycle:e.Singleton})},t.prototype.resolve=function(t,e){void 0===e&&(e=new g),this.ensureNotDisposed();var n=this.getRegistration(t);if(!n&&l(t))throw new Error('Attempted to resolve unregistered dependency token: "'+t.toString()+'"');if(this.executePreResolutionInterceptor(t,"Single"),n){var r=this.resolveRegistration(n,e);return this.executePostResolutionInterceptor(t,r,"Single"),r}if(function(t){return"function"==typeof t||t instanceof p}(t))return r=this.construct(t,e),this.executePostResolutionInterceptor(t,r,"Single"),r;throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},t.prototype.executePreResolutionInterceptor=function(t,e){var n,r;if(this.interceptors.preResolution.has(t)){var o=[];try{for(var s=i(this.interceptors.preResolution.getAll(t)),a=s.next();!a.done;a=s.next()){var c=a.value;"Once"!=c.options.frequency&&o.push(c),c.callback(t,e)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(t,o)}},t.prototype.executePostResolutionInterceptor=function(t,e,n){var r,o;if(this.interceptors.postResolution.has(t)){var s=[];try{for(var a=i(this.interceptors.postResolution.getAll(t)),c=a.next();!c.done;c=a.next()){var u=c.value;"Once"!=u.options.frequency&&s.push(u),u.callback(t,e,n)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(t,s)}},t.prototype.resolveRegistration=function(t,n){if(this.ensureNotDisposed(),t.options.lifecycle===e.ResolutionScoped&&n.scopedResolutions.has(t))return n.scopedResolutions.get(t);var r,o=t.options.lifecycle===e.Singleton,i=t.options.lifecycle===e.ContainerScoped,s=o||i;return r=h(t.provider)?t.provider.useValue:d(t.provider)?s?t.instance||(t.instance=this.resolve(t.provider.useToken,n)):this.resolve(t.provider.useToken,n):c(t.provider)?s?t.instance||(t.instance=this.construct(t.provider.useClass,n)):this.construct(t.provider.useClass,n):u(t.provider)?t.provider.useFactory(this):this.construct(t.provider,n),t.options.lifecycle===e.ResolutionScoped&&n.scopedResolutions.set(t,r),r},t.prototype.resolveAll=function(t,e){var n=this;void 0===e&&(e=new g),this.ensureNotDisposed();var r=this.getAllRegistrations(t);if(!r&&l(t))throw new Error('Attempted to resolve unregistered dependency token: "'+t.toString()+'"');if(this.executePreResolutionInterceptor(t,"All"),r){var o=r.map((function(t){return n.resolveRegistration(t,e)}));return this.executePostResolutionInterceptor(t,o,"All"),o}var i=[this.construct(t,e)];return this.executePostResolutionInterceptor(t,i,"All"),i},t.prototype.isRegistered=function(t,e){return void 0===e&&(e=!1),this.ensureNotDisposed(),this._registry.has(t)||e&&(this.parent||!1)&&this.parent.isRegistered(t,!0)},t.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},t.prototype.clearInstances=function(){var t,e;this.ensureNotDisposed();try{for(var n=i(this._registry.entries()),r=n.next();!r.done;r=n.next()){var o=s(r.value,2),a=o[0],c=o[1];this._registry.setAll(a,c.filter((function(t){return!h(t.provider)})).map((function(t){return t.instance=void 0,t})))}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.createChildContainer=function(){var n,r;this.ensureNotDisposed();var o=new t(this);try{for(var a=i(this._registry.entries()),c=a.next();!c.done;c=a.next()){var u=s(c.value,2),p=u[0],l=u[1];l.some((function(t){return t.options.lifecycle===e.ContainerScoped}))&&o._registry.setAll(p,l.map((function(t){return t.options.lifecycle===e.ContainerScoped?{provider:t.provider,options:t.options}:t})))}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o},t.prototype.beforeResolution=function(t,e,n){void 0===n&&(n={frequency:"Always"}),this.interceptors.preResolution.set(t,{callback:e,options:n})},t.prototype.afterResolution=function(t,e,n){void 0===n&&(n={frequency:"Always"}),this.interceptors.postResolution.set(t,{callback:e,options:n})},t.prototype.dispose=function(){return t=this,e=void 0,r=function(){var t;return function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){switch(e.label){case 0:return this.disposed=!0,t=[],this.disposables.forEach((function(e){var n=e.dispose();n&&t.push(n)})),[4,Promise.all(t)];case 1:return e.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}));var t,e,n,r},t.prototype.getRegistration=function(t){return this.isRegistered(t)?this._registry.get(t):this.parent?this.parent.getRegistration(t):null},t.prototype.getAllRegistrations=function(t){return this.isRegistered(t)?this._registry.getAll(t):this.parent?this.parent.getAllRegistrations(t):null},t.prototype.construct=function(t,e){var n=this;if(t instanceof p)return t.createProxy((function(t){return n.resolve(t,e)}));var r,o=function(){var r=S.get(t);if(!r||0===r.length){if(0===t.length)return new t;throw new Error('TypeInfo not known for "'+t.name+'"')}var o=r.map(n.resolveParams(e,t));return new(t.bind.apply(t,a([void 0],o)))}();return"function"!=typeof(r=o).dispose||r.dispose.length>0||this.disposables.add(o),o},t.prototype.resolveParams=function(t,e){var n=this;return function(r,o){var i,c,u,p;try{return"object"==typeof(p=r)&&"token"in p&&"multiple"in p?f(r)?r.multiple?(i=n.resolve(r.transform)).transform.apply(i,a([n.resolveAll(r.token)],r.transformArgs)):(c=n.resolve(r.transform)).transform.apply(c,a([n.resolve(r.token,t)],r.transformArgs)):r.multiple?n.resolveAll(r.token):n.resolve(r.token,t):f(r)?(u=n.resolve(r.transform,t)).transform.apply(u,a([n.resolve(r.token,t)],r.transformArgs)):n.resolve(r,t)}catch(t){throw new Error(function(t,e,n){var r,o,i,c,u=s(t.toString().match(/constructor\(([\w, ]+)\)/)||[],2)[1];return r="Cannot inject the dependency "+(c=e,(null===(i=void 0===u?null:u)?"at position #"+c:'"'+i.split(",")[c].trim()+'" at position #'+c)+' of "')+t.name+'" constructor. Reason:',void 0===o&&(o="    "),a([r],n.message.split("\n").map((function(t){return o+t}))).join("\n")}(e,o,t))}}},t.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},t}(),E=new m;if("undefined"==typeof Reflect||!Reflect.getMetadata)throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.");const R=function(){function t(t){this.node=document.createElement(t.tag),this.setParams(t)}return t.prototype.setParams=function(t){t.hasOwnProperty("cssClasses")&&this.setClasses(t.cssClasses),t.hasOwnProperty("attributes")&&this.setAttribute(t.attributes),t.hasOwnProperty("content")&&this.content(t.content),t.hasOwnProperty("event")&&this.addEventListener(t.event),t.hasOwnProperty("innerHTML")&&this.innerHTML(t.innerHTML)},t.prototype.setClasses=function(t){var e=this;t.forEach((function(t){e.node.classList.add(t)}))},t.prototype.setAttribute=function(t){var e=this;Object.keys(t).forEach((function(n){e.node.setAttribute(n,t[n])}))},t.prototype.content=function(t){this.node.textContent=t},t.prototype.innerHTML=function(t){this.node.innerHTML=t},t.prototype.addEventListener=function(t){this.node.addEventListener(t.type,t.callback)},t.prototype.removeEventListene=function(t){this.node.removeEventListener(t.type,t.callback)},t.prototype.cleanAppend=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.node.innerHTML="",(t=this.node).append.apply(t,e)},t.prototype.append=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=this.node).append.apply(t,e)},t.prototype.prepend=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=this.node).prepend.apply(t,e)},t}(),O=function(){function t(){}return t.prototype.createLoadingMessage=function(t){if(void 0===t&&(t="Loading..."),!document.querySelector(".messageBackground")){var e=new R({tag:"div",cssClasses:["messageBackground","messageLoadingBackground"]}).node,n=new R({tag:"div",cssClasses:["messageWrapper","messageLoadingWrapper"]}).node,r=new R({tag:"img",cssClasses:["iconLoading"],attributes:{src:"assets/icons/loading.svg"}}).node,o=new R({tag:"div",cssClasses:["message"],content:t}).node;n.append(r,o),e.append(n),document.body.append(e)}},t.prototype.createErrorMessage=function(t){if(!document.querySelector(".messageErrorBackground")){var e=new R({tag:"div",cssClasses:["messageBackground","messageErrorBackground"]}).node,n=new R({tag:"div",cssClasses:["messageWrapper","messageErrorWrapper"]}).node,r=new R({tag:"div",cssClasses:["message"],content:t}).node,o=new R({tag:"button",cssClasses:["btnClose"],content:"Ok",event:{type:"click",callback:this.removeErrorMessage}}).node;n.append(r,o),e.append(n),document.body.append(e)}},t.prototype.removeLoadingMessage=function(){var t;null===(t=document.querySelector(".messageLoadingBackground"))||void 0===t||t.remove()},t.prototype.removeErrorMessage=function(){var t;null===(t=document.querySelector(".messageErrorBackground"))||void 0===t||t.remove()},t}(),k=function(){this.login="",this.password=""};const C=function(){function t(){this.routes={},this.baseUrl="/arthur-iorbalidi-JSFE2023Q4/Fun-Chat/dist/"}return t.prototype.navigateTo=function(t){window.history.pushState({},"","".concat(this.baseUrl).concat(t)),window.dispatchEvent(new PopStateEvent("popstate",{}))},t.prototype.navigateBack=function(){window.history.back()},t.prototype.initRouter=function(t,e){this.addRoutes(t),window.addEventListener("popstate",this.changePage.bind(this,e)),this.changePage(e)},t.prototype.addRoutes=function(t){var e=this;t.forEach((function(t){e.addRoute(t)}))},t.prototype.addRoute=function(t){var e=t.route,n=t.callback,r=t.isDefaultRoute;this.routes["".concat(this.baseUrl).concat(e)]=n,r&&(this.routes["".concat(this.baseUrl)]=n)},t.prototype.changePage=function(t){var e=window.location.pathname;this.routes[e]&&t(this.routes[e]())},t}();var M;!function(t){t.USER_LOGIN="USER_LOGIN",t.USER_LOGOUT="USER_LOGOUT",t.USER_EXTERNAL_LOGIN="USER_EXTERNAL_LOGIN",t.USER_EXTERNAL_LOGOUT="USER_EXTERNAL_LOGOUT",t.USER_ACTIVE="USER_ACTIVE",t.USER_INACTIVE="USER_INACTIVE",t.MSG_SEND="MSG_SEND",t.MSG_FROM_USER="MSG_FROM_USER",t.MSG_DELIVER="MSG_DELIVER",t.MSG_READ="MSG_READ",t.MSG_DELETE="MSG_DELETE",t.MSG_EDIT="MSG_EDIT",t.ERROR="ERROR"}(M||(M={}));const A=function(){function t(){this.url="ws://127.0.0.1:4000",this.isWebSocketOpen=!1,this.router=E.resolve(C),this.userData=E.resolve(k),this.subscribers={},this.pendingRequests=[],this.webSocket=new WebSocket(this.url),this.setup(),(new O).createLoadingMessage("Connecting...")}return t.prototype.subscribe=function(t,e){var n;this.subscribers[t]||(this.subscribers[t]=[]),null===(n=this.subscribers[t])||void 0===n||n.push(e)},t.prototype.removeSubscribers=function(){var t={};t[M.ERROR]=this.subscribers[M.ERROR],this.subscribers=t},t.prototype.notify=function(t){var e,n=JSON.parse(t.data);null===(e=this.subscribers[n.type])||void 0===e||e.forEach((function(t){t(n)}))},t.prototype.setup=function(){this.webSocket.addEventListener("open",this.onOpen.bind(this)),this.webSocket.addEventListener("message",this.notify.bind(this)),this.webSocket.addEventListener("close",this.onClose.bind(this))},t.prototype.onOpen=function(){if(this.isWebSocketOpen=!0,this.removeSubscribers(),this.router.navigateTo("authorization"),""!==this.userData.login){var t={id:"0",type:M.USER_LOGIN,payload:{user:{login:this.userData.login,password:this.userData.password}}};this.webSocket.send(JSON.stringify(t))}for(;this.pendingRequests.length>0;)t=this.pendingRequests.shift(),this.send(t);(new O).removeLoadingMessage()},t.prototype.onClose=function(){this.webSocket=new WebSocket(this.url),this.setup(),(new O).createLoadingMessage("Connecting...")},t.prototype.send=function(t){this.isWebSocketOpen?this.webSocket.send(JSON.stringify(t)):this.pendingRequests.push(t)},t}(),T=function(){function t(){this.webSocketService=E.resolve(A),this.webSocketService.subscribe(M.ERROR,this.showMessage.bind(this))}return t.prototype.showMessage=function(t){var e=new O;e.removeLoadingMessage(),e.createErrorMessage(t.payload.error)},t}();var P=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const L=function(t){function e(){var e=t.call(this,{tag:"div",cssClasses:["aboutWrapper"]})||this;return e.appName="Fun-Chat",e.authorName="Arthur-Iorbalidi",e.description="The application is designed to demonstrate the Fun-Chat task as part of the RSSchool JS/FE 2023Q4 course",e.router=E.resolve(C),e.init(),e}return P(e,t),e.prototype.init=function(){var t=new R({tag:"div",cssClasses:["container"]}).node,e=new R({tag:"h1",cssClasses:["title"],content:this.appName}).node,n=new R({tag:"p",cssClasses:["description"],content:this.description}).node,r=new R({tag:"a",cssClasses:["author"],attributes:{href:"https://github.com/Arthur-Iorbalidi"},content:"Author: ".concat(this.authorName)}).node,o=new R({tag:"button",cssClasses:["backBtn"],content:"Back",event:{type:"click",callback:this.toAuthorization.bind(this)}}).node;t.append(e,n,r,o),this.append(t)},e.prototype.toAuthorization=function(){this.router.navigateBack()},e}(R);var j=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),x=function(){return x=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},x.apply(this,arguments)};const I=function(t){function e(e){var n=t.call(this,x(x({},e),{tag:"input"}))||this;return n.setInputParams(e),n}return j(e,t),e.prototype.setInputParams=function(t){t.hasOwnProperty("placeholder")&&(this.node.placeholder=t.placeholder),t.hasOwnProperty("value")&&(this.node.value=t.value),t.hasOwnProperty("onInput")&&this.node.addEventListener("input",t.onInput)},e.prototype.reset=function(){this.node.value=""},e}(R);var N=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const U=function(t){function e(){var e=t.call(this,{tag:"div",cssClasses:["inputNameWrapper"]})||this;return e.init(),e}return N(e,t),e.prototype.init=function(){var t=new I({cssClasses:["input","inputName"],placeholder:"Name",onInput:this.validation}).node,e=new R({tag:"div",cssClasses:["mistakeMessage","mistakeMessageName"]}).node;this.append(t,e)},e.prototype.validation=function(t){var e=t.target,n=document.querySelector(".mistakeMessageName"),r=document.querySelector(".inputPassword"),o=document.querySelector(".submit"),i="";/^[A-Z].*/.test(e.value)?(e.value.length<4&&(i+="Minimum size - ".concat(4)),/^[a-zA-Z]+$/.test(e.value)||(i+='English alphabet and "-" are allowed')):i+="The first letter must be capitalized and English",n.textContent=i,""===i&&/^(?=.*[a-z])(?=.*[A-Z])(?=.*[\W_]).{8,}$/.test(r.value)?o.disabled=!1:o.disabled=!0},e}(R);var D=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const G=function(t){function e(){var e=t.call(this,{tag:"div",cssClasses:["inputPasswordWrapper"]})||this;return e.init(),e}return D(e,t),e.prototype.init=function(){var t=new I({cssClasses:["input","inputPassword"],placeholder:"Password",onInput:this.validation}).node,e=new R({tag:"div",cssClasses:["mistakeMessage","mistakeMessagePassword"]}).node;this.append(t,e)},e.prototype.validation=function(t){var e=t.target,n=document.querySelector(".mistakeMessagePassword"),r=document.querySelector(".inputName"),o=document.querySelector(".submit"),i="";e.value.length<8&&(i+="Minimum size - ".concat(8,". ")),/^(?=.*[a-z])(?=.*[A-Z])/.test(e.value)||(i+="Use lowercase and uppercase English letters and symbols. "),/[\W_]/.test(e.value)||(i+="Use symbols."),n.textContent=i,""===i&&/^(?=.*[A-Z])[a-zA-Z-]{4,}$/.test(r.value)?o.disabled=!1:o.disabled=!0},e}(R);var q=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const F=function(t){function e(){var e=t.call(this,{tag:"form",cssClasses:["form"]})||this;return e.router=E.resolve(C),e.webSocketService=E.resolve(A),e.userData=E.resolve(k),e.init(),e}return q(e,t),e.prototype.init=function(){this.addEventListener({type:"submit",callback:this.register.bind(this)});var t=new R({tag:"h2",cssClasses:["title"],content:"Authorization"}).node,e=new R({tag:"button",cssClasses:["submit"],content:"Submit",attributes:{disabled:"true",type:"submit"}}).node,n=new R({tag:"button",cssClasses:["aboutBtn"],content:"About",event:{type:"click",callback:this.toAbout.bind(this)}}).node;this.append(t,(new U).node,(new G).node,e,n)},e.prototype.register=function(t){t.preventDefault();var e=document.querySelector(".inputName"),n=document.querySelector(".inputPassword"),r={id:"0",type:M.USER_LOGIN,payload:{user:{login:e.value,password:n.value}}};this.userData.login=e.value,this.userData.password=n.value,this.webSocketService.send(r),(new O).createLoadingMessage()},e.prototype.toAbout=function(){this.webSocketService.removeSubscribers(),this.router.navigateTo("about")},e}(R);var H=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const z=function(t){function e(){var e=t.call(this,{tag:"div",cssClasses:["authenticationWrapper"]})||this;return e.router=E.resolve(C),e.webSocketService=E.resolve(A),e.webSocketService.subscribe(M.USER_LOGIN,e.toMain.bind(e)),e.init(),e}return H(e,t),e.prototype.init=function(){this.append((new F).node)},e.prototype.toMain=function(t){var e;(null===(e=t.payload.user)||void 0===e?void 0:e.isLogined)&&(this.webSocketService.removeSubscribers(),this.router.navigateTo("main")),(new O).removeLoadingMessage()},e}(R);var W=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const V=function(t){function e(){var e=t.call(this,{tag:"footer",cssClasses:["footer"]})||this;return e.init(),e}return W(e,t),e.prototype.init=function(){var t=new R({tag:"img",cssClasses:["schoolLogo"],attributes:{src:"assets/imgs/schoolLogo.png"}}).node,e=new R({tag:"a",cssClasses:["authorName"],content:"Arthur-Iorbalidi",attributes:{href:"https://github.com/Arthur-Iorbalidi"}}).node,n=new R({tag:"span",cssClasses:["appYear"],content:"2024"}).node;this.append(t,e,n)},e}(R);var B;!function(t){t.CHANGE_RECIPIENT="CHANGE_RECIPIENT"}(B||(B={}));const K=function(){function t(){this.subscribers={},this.currentRecipient={login:"",status:""}}return t.prototype.setCurrentRecipient=function(t,e){this.currentRecipient.login=t,this.currentRecipient.status=e,this.notify(B.CHANGE_RECIPIENT)},t.prototype.subscribe=function(t,e){var n;this.subscribers[t]||(this.subscribers[t]=[]),null===(n=this.subscribers[t])||void 0===n||n.push(e)},t.prototype.notify=function(t){var e,n=this;null===(e=this.subscribers[t])||void 0===e||e.forEach((function(t){t(n.currentRecipient.login,n.currentRecipient.status)}))},t}();var X=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Z=function(t){function e(){var e=t.call(this,{tag:"header",cssClasses:["header"]})||this;return e.router=E.resolve(C),e.webSocketService=E.resolve(A),e.userData=E.resolve(k),e.currentRecipient=E.resolve(K),e.webSocketService.subscribe(M.USER_LOGOUT,e.toAuthorization.bind(e)),e.init(),e}return X(e,t),e.prototype.init=function(){var t=new R({tag:"div",cssClasses:["textWrapper"]}).node,e=new R({tag:"span",cssClasses:["userName"],content:"User: ".concat(this.userData.login)}).node,n=new R({tag:"span",cssClasses:["appName"],content:"Fun-Chat"}).node,r=new R({tag:"div",cssClasses:["btnsWrapper"]}).node,o=new R({tag:"button",cssClasses:["aboutBtn"],content:"About",event:{type:"click",callback:this.toAbout.bind(this)}}).node,i=new R({tag:"button",cssClasses:["logoutBtn"],content:"Logout",event:{type:"click",callback:this.logout.bind(this)}}).node;t.append(e,n),r.append(o,i),this.append(t,r)},e.prototype.logout=function(){var t={id:"0",type:M.USER_LOGOUT,payload:{user:{login:this.userData.login,password:this.userData.password}}};this.webSocketService.send(t),(new O).createLoadingMessage()},e.prototype.toAuthorization=function(t){var e;(null===(e=t.payload.user)||void 0===e?void 0:e.isLogined)||(this.webSocketService.removeSubscribers(),this.router.navigateTo("authorization")),this.userData.login="",this.userData.password="",this.currentRecipient.currentRecipient.login="",this.currentRecipient.currentRecipient.status="",(new O).removeLoadingMessage()},e.prototype.toAbout=function(){this.webSocketService.removeSubscribers(),this.router.navigateTo("about")},e}(R);var J=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const $=function(t){function e(){var e=t.call(this,{tag:"ul",cssClasses:["userList"]})||this;return e.webSocketService=E.resolve(A),e.userData=E.resolve(k),e.currentRecipient=E.resolve(K),e.webSocketService.subscribe(M.USER_ACTIVE,e.drawUsers.bind(e)),e.webSocketService.subscribe(M.USER_INACTIVE,e.drawUsers.bind(e)),e.webSocketService.subscribe(M.USER_EXTERNAL_LOGIN,e.externalLogin.bind(e)),e.webSocketService.subscribe(M.USER_EXTERNAL_LOGOUT,e.externalLogout.bind(e)),e}return J(e,t),e.prototype.drawUsers=function(t){var e=this,n=t.payload.users;null==n||n.forEach((function(n){e.userData.login!==n.login&&e.append(e.drawUser(t.type,n.login))}))},e.prototype.drawUser=function(t,e){var n=new R({tag:"li",cssClasses:["listItem"],attributes:{"data-login":e,"data-isLogined":t===M.USER_ACTIVE?"true":"false"},event:{type:"click",callback:this.selectUser.bind(this)}}).node,r=new R({tag:"div",cssClasses:["marker"]}).node,o=new R({tag:"span",cssClasses:["userName"],content:e}).node;return n.append(r,o),n},e.prototype.externalLogout=function(t){var e=this;Array.from(this.node.children).forEach((function(n){var r;n.getAttribute("data-login")===(null===(r=t.payload.user)||void 0===r?void 0:r.login)&&(n.setAttribute("data-isLogined","false"),n.remove(),e.node.append(n))}))},e.prototype.externalLogin=function(t){var e,n=this,r=Array.from(this.node.children),o=!1;r.forEach((function(e){var r;e.getAttribute("data-login")===(null===(r=t.payload.user)||void 0===r?void 0:r.login)&&(e.setAttribute("data-isLogined","true"),e.remove(),n.node.prepend(e),o=!0)})),o||this.prepend(this.drawUser(M.USER_ACTIVE,null===(e=t.payload.user)||void 0===e?void 0:e.login))},e.prototype.selectUser=function(t){var e=t.currentTarget,n=e.getAttribute("data-login"),r=e.getAttribute("data-isLogined");this.currentRecipient.setCurrentRecipient(n,r)},e}(R);var Q=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Y=function(t){function e(){var e=t.call(this,{tag:"div",cssClasses:["contacts"]})||this;return e.webSocketService=E.resolve(A),e.usersList=(new $).node,e.init(),e.getAuthenticatedUsers(),e.getUnauthorizedUsers(),e}return Q(e,t),e.prototype.init=function(){var t=new I({cssClasses:["inputSearch"],placeholder:"Search",onInput:this.search.bind(this)}).node;this.append(t,this.usersList)},e.prototype.search=function(t){var e=t.target;Array.from(this.usersList.children).forEach((function(t){var n=t.getAttribute("data-login");(null==n?void 0:n.includes(e.value))?null==t||t.classList.remove("hidden"):null==t||t.classList.add("hidden")}))},e.prototype.getAuthenticatedUsers=function(){var t={id:"0",type:M.USER_ACTIVE,payload:null};this.webSocketService.send(t)},e.prototype.getUnauthorizedUsers=function(){var t={id:"0",type:M.USER_INACTIVE,payload:null};this.webSocketService.send(t)},e}(R);var tt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const et=function(t){function e(){var e=t.call(this,{tag:"form",cssClasses:["formMessage"]})||this;return e.currentRecipient=E.resolve(K),e.webSocketService=E.resolve(A),e.addEventListener({type:"submit",callback:e.sendMessage.bind(e)}),e.init(),e.currentRecipient.subscribe(B.CHANGE_RECIPIENT,e.enableForm.bind(e)),e}return tt(e,t),e.prototype.init=function(){var t=new I({cssClasses:["inputMessage"],placeholder:"Enter you message",attributes:{disabled:""},onInput:this.validation}).node,e=new R({tag:"button",cssClasses:["buttonSend"],content:"Send",attributes:{disabled:""}}).node;this.append(t,e)},e.prototype.enableForm=function(){this.node.querySelector(".inputMessage").removeAttribute("disabled")},e.prototype.validation=function(t){var e=t.currentTarget,n=document.querySelector(".buttonSend");""!==e.value?n.disabled=!1:n.disabled=!0},e.prototype.sendMessage=function(t){t.preventDefault();var e=document.querySelector(".inputMessage"),n={id:"0",type:M.MSG_SEND,payload:{message:{to:this.currentRecipient.currentRecipient.login,text:e.value}}};e.value="",document.querySelector(".buttonSend").disabled=!0,this.webSocketService.send(n)},e}(R);var nt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const rt=function(t){function e(){var e=t.call(this,{tag:"section",cssClasses:["messages"]})||this;return e.webSocketService=E.resolve(A),e.currentRecipient=E.resolve(K),e.addEventListener({type:"click",callback:e.sendReadStatusRequest.bind(e)}),e.init(),e.currentRecipient.subscribe(B.CHANGE_RECIPIENT,e.sendMessageHistoryRequest.bind(e)),e.webSocketService.subscribe(M.MSG_SEND,e.getMessage.bind(e)),e.webSocketService.subscribe(M.MSG_FROM_USER,e.drawHistory.bind(e)),e.webSocketService.subscribe(M.MSG_DELIVER,e.changeStatus.bind(e)),e.webSocketService.subscribe(M.MSG_READ,e.changeStatus.bind(e)),e}return nt(e,t),e.prototype.init=function(){var t=new R({tag:"span",cssClasses:["greetingMessage"],content:"Select a user to send a message..."}).node;this.append(t)},e.prototype.createGreeting=function(){var t=new R({tag:"span",cssClasses:["greetingMessage"],content:"Write you first message..."}).node;this.append(t)},e.prototype.drawMessage=function(t){var e=new R({tag:"div",cssClasses:(null==t?void 0:t.from)===this.currentRecipient.currentRecipient.login?["containerMessage","recipient"]:["containerMessage","yours"],attributes:{"data-id":t.id,"data-isReaded":t.status.isReaded.toString()}}).node,n=new R({tag:"div",cssClasses:["message"]}).node,r=new R({tag:"div",cssClasses:["messageHeader"]}).node,o=new R({tag:"span",cssClasses:["sender"],content:(null==t?void 0:t.from)===this.currentRecipient.currentRecipient.login?t.from:"you"}).node,i=new R({tag:"span",cssClasses:["time"],content:this.getFormattedDate(t.datetime)}).node,s=new R({tag:"div",cssClasses:["text"],content:null==t?void 0:t.text}).node,a=new R({tag:"div",cssClasses:["messageFooter"]}).node,c=new R({tag:"div",cssClasses:["isChanged"],content:(null==t?void 0:t.status.isEdited)?"edited":""}).node,u="";this.currentRecipient.currentRecipient.login!==t.from&&(u="sent",(null==t?void 0:t.status.isDelivered)&&(u="delivered",(null==t?void 0:t.status.isReaded)&&(u="readed")));var p=new R({tag:"div",cssClasses:["status"],content:u}).node;r.append(o,i),a.append(c,p),n.append(r,s,a),e.append(n),this.append(e)},e.prototype.getMessage=function(t){var e,n,r,o;this.currentRecipient.currentRecipient.login!==(null===(e=t.payload.message)||void 0===e?void 0:e.to)&&this.currentRecipient.currentRecipient.login!==(null===(n=t.payload.message)||void 0===n?void 0:n.from)||(null===(r=this.node.querySelector(".greetingMessage"))||void 0===r||r.remove(),this.drawMessage(t.payload.message),this.node.scrollTop=this.node.scrollHeight),this.currentRecipient.currentRecipient.login!==(null===(o=t.payload.message)||void 0===o?void 0:o.from)&&this.sendReadStatusRequest()},e.prototype.drawHistory=function(t){var e=this;this.cleanMessages();var n=t.payload.messages;0===(null==n?void 0:n.length)&&this.createGreeting(),null==n||n.forEach((function(t){e.drawMessage(t)})),this.node.scrollTop=this.node.scrollHeight},e.prototype.cleanMessages=function(){document.querySelector(".messages").innerHTML=""},e.prototype.sendMessageHistoryRequest=function(){var t={id:"0",type:M.MSG_FROM_USER,payload:{user:{login:this.currentRecipient.currentRecipient.login}}};this.webSocketService.send(t)},e.prototype.getFormattedDate=function(t){var e=new Date(t),n="".concat(o(e.getDate()),".").concat(o(e.getMonth()+1),".").concat(e.getFullYear()),r="".concat(o(e.getHours()),":").concat(o(e.getMinutes()),":").concat(o(e.getSeconds()));return"".concat(n,", ").concat(r);function o(t){return t<10?"0".concat(t):t}},e.prototype.changeStatus=function(t){var e,n,r,o=document.querySelector('[data-id="'.concat(null===(e=t.payload.message)||void 0===e?void 0:e.id,'"]'));if(o){var i=null==o?void 0:o.querySelector(".status");(null===(n=t.payload.message)||void 0===n?void 0:n.status.isDelivered)&&(i.textContent="delivered"),(null===(r=t.payload.message)||void 0===r?void 0:r.status.isReaded)&&o.classList.contains("yours")&&(i.textContent="readed")}},e.prototype.sendReadStatusRequest=function(){var t=this;document.querySelectorAll('.recipient[data-isReaded="false"]').forEach((function(e){var n={id:"0",type:"MSG_READ",payload:{message:{id:e.getAttribute("data-id")}}};t.webSocketService.send(n)}))},e}(R);var ot=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const it=function(t){function e(){var e=t.call(this,{tag:"section",cssClasses:["dialog_header"]})||this;return e.currentRecipient=E.resolve(K),e.webSocketService=E.resolve(A),e.init(),e.currentRecipient.subscribe(B.CHANGE_RECIPIENT,e.changeRecipient.bind(e)),e.webSocketService.subscribe(M.USER_EXTERNAL_LOGIN,e.recipientLogin.bind(e)),e.webSocketService.subscribe(M.USER_EXTERNAL_LOGOUT,e.recipientLogout.bind(e)),e}return ot(e,t),e.prototype.init=function(){var t=new R({tag:"span",cssClasses:["userName"]}).node,e=new R({tag:"div",cssClasses:["userStatus"]}).node;this.append(t,e)},e.prototype.changeRecipient=function(t,e){this.node.querySelector(".userName").textContent=t;var n=this.node.querySelector(".userStatus");"true"===e?(n.textContent="online",n.classList.add("active")):(n.textContent="offline",n.classList.remove("active"))},e.prototype.recipientLogin=function(t){var e;if((null===(e=t.payload.user)||void 0===e?void 0:e.login)===this.currentRecipient.currentRecipient.login){var n=this.node.querySelector(".userStatus");n.textContent="online",n.classList.add("active")}},e.prototype.recipientLogout=function(t){var e;if((null===(e=t.payload.user)||void 0===e?void 0:e.login)===this.currentRecipient.currentRecipient.login){var n=this.node.querySelector(".userStatus");n.textContent="offline",n.classList.remove("active")}},e}(R);var st=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const at=function(t){function e(){var e=t.call(this,{tag:"aside",cssClasses:["dialog"]})||this;return e.init(),e}return st(e,t),e.prototype.init=function(){this.append((new it).node,(new rt).node,(new et).node)},e}(R);var ct=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const ut=function(t){function e(){var e=t.call(this,{tag:"section",cssClasses:["mainSection"]})||this;return e.init(),e}return ct(e,t),e.prototype.init=function(){this.append((new Y).node,(new at).node)},e}(R);var pt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const lt=function(t){function e(){var e=t.call(this,{tag:"div",cssClasses:["mainWrapper"]})||this;return e.init(),e}return pt(e,t),e.prototype.init=function(){var t=new R({tag:"div",cssClasses:["container"]}).node;t.append((new Z).node,(new ut).node,(new V).node),this.append(t)},e}(R),ft=[{route:"authorization",callback:function(){return(new z).node},isDefaultRoute:!0},{route:"main",callback:function(){return(new lt).node}},{route:"about",callback:function(){return(new L).node}}],dt=function(){function t(){this.router=E.resolve(C);var t=new R({tag:"div",cssClasses:["root"]}).node;this.entryPoint=t,document.body.append(t)}return t.prototype.start=function(){var t=this;new T,this.router.initRouter(ft,(function(e){t.render(e)}))},t.prototype.render=function(t){this.entryPoint.innerHTML="",this.entryPoint.append(t)},t}();E.registerSingleton(A),E.registerSingleton(C),E.registerSingleton(k),E.registerSingleton(K),(new dt).start()})()})();